import{_ as a,V as s,W as e,a0 as n}from"./framework-9a29aaa0.js";const i={},l=n(`<h1 id="linux工具之lsof命令详解" tabindex="-1"><a class="header-anchor" href="#linux工具之lsof命令详解" aria-hidden="true">#</a> Linux工具之lsof命令详解</h1><h2 id="基本概念" tabindex="-1"><a class="header-anchor" href="#基本概念" aria-hidden="true">#</a> 基本概念</h2><p><strong>lsof</strong>（List Set Open Files）是一个用于查看系统中当前打开文件的命令。在类Unix系统中，几乎所有事物都被视为文件，包括常规文件、目录、设备文件、套接字、管道等。因此，lsof 不仅可以查看正在使用的文件，还可以查看使用网络连接、设备和其他资源的进程。下面我将详细介绍 lsof 的常用选项和用法。</p><h2 id="基本语法" tabindex="-1"><a class="header-anchor" href="#基本语法" aria-hidden="true">#</a> 基本语法</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>文件<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="常用选项" tabindex="-1"><a class="header-anchor" href="#常用选项" aria-hidden="true">#</a> 常用选项</h2><p><strong>1.查看所有打开的文件</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这将列出系统中所有打开的文件。输出的每一行代表一个打开的文件，并包含以下列信息：</p><ul><li>COMMAND：打开文件的进程名。</li><li>PID：进程ID。</li><li>USER：进程的属主。</li><li>FD：文件描述符，表示文件在进程中的引用方式（例如：cwd表示当前工作目录，txt表示程序代码，mem表示内存映射文件，0-9表示文件描述符号）。</li><li>TYPE：文件类型（例如：DIR目录，REG常规文件，CHR字符设备，FIFO先进先出队列，SOCK套接字）。</li><li>DEVICE：设备号。</li><li>SIZE/OFF：文件大小或文件偏移。</li><li>NODE：文件节点号。</li><li>NAME：文件名或路径。</li></ul><p><strong>2.根据文件名查看使用它的进程</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> /path/to/file
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3.根据PID查看进程打开的文件</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-p</span> PID
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>4.根据用户查看打开的文件</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-u</span> 用户名
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>5.查看网络连接</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-i</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>你可以进一步指定协议和端口：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-i</span> TCP:80  <span class="token comment"># 查看所有HTTP（TCP端口80）连接</span>
<span class="token function">lsof</span> <span class="token parameter variable">-i</span> UDP:53  <span class="token comment"># 查看所有DNS（UDP端口53）连接</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>6.根据命令名称查看文件</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-c</span> 命令名
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>7.查看指定端口的进程</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-i</span> :端口号
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>列出正在使用指定端口的进程。例如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-i</span> :22  <span class="token comment"># 查看占用22端口的进程（通常是SSH服务）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>8.查看UNIX域套接字</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-U</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>9.组合使用多个选项</strong></p><p>你可以组合多个选项以达到更细致的过滤。例如，要查看用户root的进程sshd打开的所有文件：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">lsof</span> <span class="token parameter variable">-u</span> root <span class="token parameter variable">-c</span> sshd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,31),d=[l];function r(t,c){return s(),e("div",null,d)}const p=a(i,[["render",r],["__file","linux-lsof-cmd.html.vue"]]);export{p as default};
