<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/posts/Interview/cpp.html"><meta property="og:site_name" content="Code Building"><meta property="og:title" content="c++é¢ç»"><meta property="og:description" content="c++é¢ç» c++åŸºç¡€ constå…³é”®å­—çš„ä½œç”¨ constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³• constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ– constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³ï¼Ÿ è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—ï¼Ÿ dynamic_castå¤±è´¥ä¼šæ€ä¹ˆæ ·ï¼Ÿ å¤šé‡ç»§æ‰¿æ—¶ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»ï¼ŒæŒ‡é’ˆä¼šå˜å—? å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ staticæ–¹æ³•å¯ä»¥æ˜¯constå—? è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³• å†…å­˜å †æ ˆå¯¹æ¯”ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•ï¼Ÿ ++iå’Œi++å“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•° std::futureå’Œstd::promiseçš„ä½œç”¨ ç±»å’Œå¯¹è±¡ ä»€ä¹ˆæ˜¯RTTI STL mapå’Œunordered_mapçš„åŒºåˆ«? å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ å‚è€ƒ"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-08-16T01:38:01.000Z"><meta property="article:tag" content="c++é¢ç»"><meta property="article:modified_time" content="2024-08-16T01:38:01.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"c++é¢ç»","image":[""],"dateModified":"2024-08-16T01:38:01.000Z","author":[]}</script><title>c++é¢ç» | Code Building</title><meta name="description" content="c++é¢ç» c++åŸºç¡€ constå…³é”®å­—çš„ä½œç”¨ constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³• constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ– constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³ï¼Ÿ è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—ï¼Ÿ dynamic_castå¤±è´¥ä¼šæ€ä¹ˆæ ·ï¼Ÿ å¤šé‡ç»§æ‰¿æ—¶ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»ï¼ŒæŒ‡é’ˆä¼šå˜å—? å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ staticæ–¹æ³•å¯ä»¥æ˜¯constå—? è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³• å†…å­˜å †æ ˆå¯¹æ¯”ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•ï¼Ÿ ++iå’Œi++å“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•° std::futureå’Œstd::promiseçš„ä½œç”¨ ç±»å’Œå¯¹è±¡ ä»€ä¹ˆæ˜¯RTTI STL mapå’Œunordered_mapçš„åŒºåˆ«? å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ å‚è€ƒ">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-646e803e.css" as="style"><link rel="stylesheet" href="/assets/style-646e803e.css">
    <link rel="modulepreload" href="/assets/app-8c1e171f.js"><link rel="modulepreload" href="/assets/framework-9a29aaa0.js"><link rel="modulepreload" href="/assets/cpp.html-64bdc700.js"><link rel="modulepreload" href="/assets/cpp.html-5fe50116.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="Code Building"><!----><span class="site-name hide-in-pad">Code Building</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ç¨‹åºå‘˜å°x"><span class="font-icon icon iconfont icon-home" style=""></span>ç¨‹åºå‘˜å°x<!----></a></div><div class="nav-item hide-in-mobile"><a href="/demo/" class="nav-link" aria-label="æ¼”ç¤º"><span class="font-icon icon iconfont icon-discover" style=""></span>æ¼”ç¤º<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åšæ–‡"><span class="title"><span class="font-icon icon iconfont icon-edit" style=""></span>åšæ–‡</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/posts/network" class="nav-link" aria-label="è®¡ç®—æœºç½‘ç»œ"><span class="font-icon icon iconfont icon-edit" style=""></span>è®¡ç®—æœºç½‘ç»œ<!----></a></li><li class="dropdown-item"><a href="/posts/Program_language/cpp" class="nav-link" aria-label="c++"><span class="font-icon icon iconfont icon-edit" style=""></span>c++<!----></a></li><li class="dropdown-item"><a href="/posts/design-pattern" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼"><span class="font-icon icon iconfont icon-edit" style=""></span>è®¾è®¡æ¨¡å¼<!----></a></li><li class="dropdown-item"><a href="/posts/tool" class="nav-link" aria-label="å·¥å…·"><span class="font-icon icon iconfont icon-edit" style=""></span>å·¥å…·<!----></a></li><li class="dropdown-item"><a href="/posts/Linux/compile" class="nav-link" aria-label="ç¼–è¯‘åŸç†"><span class="font-icon icon iconfont icon-edit" style=""></span>ç¼–è¯‘åŸç†<!----></a></li><li class="dropdown-item"><a href="/posts/Linux/kernel/Linux-0.11" class="nav-link" aria-label="Linux-0.11è¯¦è§£"><span class="font-icon icon iconfont icon-edit" style=""></span>Linux-0.11è¯¦è§£<!----></a></li><li class="dropdown-item"><a href="/posts/Linux/application-dev" class="nav-link" aria-label="Linuxåº”ç”¨å±‚å¼€å‘"><span class="font-icon icon iconfont icon-edit" style=""></span>Linuxåº”ç”¨å±‚å¼€å‘<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://meiriyiwen.com/" rel="noopener noreferrer" target="_blank" aria-label="æ¯æ—¥ä¸€æ–‡" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>æ¯æ—¥ä¸€æ–‡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/posts/about/about.html" class="nav-link" aria-label="å…³äºä½œè€…"><span class="font-icon icon iconfont icon-about" style=""></span>å…³äºä½œè€…<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->c++é¢ç»</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://zgjsxx.github.io" target="_blank" rel="noopener noreferrer">ç¨‹åºå‘˜å°x</a></span><span property="author" content="ç¨‹åºå‘˜å°x"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-05-11T07:52:53.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 26 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT26M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category0 clickable" role="navigation">é¢ç»</span><meta property="articleSection" content="é¢ç»"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag0 clickable" role="navigation">c++é¢ç»</span><meta property="keywords" content="c++é¢ç»"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#c-åŸºç¡€" class="router-link-active router-link-exact-active toc-link level2">c++åŸºç¡€</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#constå…³é”®å­—çš„ä½œç”¨" class="router-link-active router-link-exact-active toc-link level3">constå…³é”®å­—çš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³•" class="router-link-active router-link-exact-active toc-link level3">constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ–" class="router-link-active router-link-exact-active toc-link level3">constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³" class="router-link-active router-link-exact-active toc-link level3">constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—" class="router-link-active router-link-exact-active toc-link level3">è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#dynamic-castå¤±è´¥ä¼šæ€ä¹ˆæ ·" class="router-link-active router-link-exact-active toc-link level3">dynamic_castå¤±è´¥ä¼šæ€ä¹ˆæ ·ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#å¤šé‡ç»§æ‰¿æ—¶-æŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»-æŒ‡é’ˆä¼šå˜å—" class="router-link-active router-link-exact-active toc-link level3">å¤šé‡ç»§æ‰¿æ—¶ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»ï¼ŒæŒ‡é’ˆä¼šå˜å—?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ" class="router-link-active router-link-exact-active toc-link level3">å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#staticæ–¹æ³•å¯ä»¥æ˜¯constå—" class="router-link-active router-link-exact-active toc-link level3">staticæ–¹æ³•å¯ä»¥æ˜¯constå—?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³•" class="router-link-active router-link-exact-active toc-link level3">è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#å†…å­˜å †æ ˆå¯¹æ¯”-åˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹-å®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•" class="router-link-active router-link-exact-active toc-link level3">å†…å­˜å †æ ˆå¯¹æ¯”ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#iå’Œi-å“ªä¸ªæ•ˆç‡æ›´é«˜" class="router-link-active router-link-exact-active toc-link level3">++iå’Œi++å“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°" class="router-link-active router-link-exact-active toc-link level3">å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#std-futureå’Œstd-promiseçš„ä½œç”¨" class="router-link-active router-link-exact-active toc-link level3">std::futureå’Œstd::promiseçš„ä½œç”¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#ç±»å’Œå¯¹è±¡" class="router-link-active router-link-exact-active toc-link level2">ç±»å’Œå¯¹è±¡</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#ä»€ä¹ˆæ˜¯rtti" class="router-link-active router-link-exact-active toc-link level3">ä»€ä¹ˆæ˜¯RTTI</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#stl" class="router-link-active router-link-exact-active toc-link level2">STL</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#mapå’Œunordered-mapçš„åŒºåˆ«-å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">mapå’Œunordered_mapçš„åŒºåˆ«? å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/Interview/cpp.html#å‚è€ƒ" class="router-link-active router-link-exact-active toc-link level2">å‚è€ƒ</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><ul><li><a href="#c%E9%9D%A2%E7%BB%8F">c++é¢ç»</a><ul><li><a href="#c%E5%9F%BA%E7%A1%80">c++åŸºç¡€</a><ul><li><a href="#const%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%9C%E7%94%A8">constå…³é”®å­—çš„ä½œç”¨</a></li><li><a href="#const%E6%88%90%E5%91%98%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95">constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³•</a></li><li><a href="#const%E6%88%90%E5%91%98%E5%BC%95%E7%94%A8%E5%A6%82%E4%BD%95%E5%88%9D%E5%A7%8B%E5%8C%96">constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ–</a></li><li><a href="#const%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E5%86%85%E9%83%A8%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3">constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³ï¼Ÿ</a></li><li><a href="#%E8%99%9A%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E5%8F%AF%E4%BB%A5%E4%B8%8D%E4%B8%80%E6%A0%B7%E5%90%97">è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—ï¼Ÿ</a></li><li><a href="#dynamic_cast%E5%A4%B1%E8%B4%A5%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7">dynamic_castå¤±è´¥ä¼šæ€ä¹ˆæ ·ï¼Ÿ</a></li><li><a href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E6%97%B6%E6%8C%87%E5%90%91%E5%AD%90%E7%B1%BB%E7%9A%84%E6%8C%87%E9%92%88%E8%BD%AC%E5%8C%96%E4%B8%BA%E5%9F%BA%E7%B1%BB%E6%8C%87%E9%92%88%E4%BC%9A%E5%8F%98%E5%90%97">å¤šé‡ç»§æ‰¿æ—¶ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»ï¼ŒæŒ‡é’ˆä¼šå˜å—?</a></li><li><a href="#%E5%B8%A6%E6%9C%89%E8%99%9A%E5%87%BD%E6%95%B0%E7%9A%84%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E7%9A%84%E5%86%85%E5%AD%98%E5%88%86%E5%B8%83">å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ</a></li><li><a href="#static%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E6%98%AFconst%E5%90%97">staticæ–¹æ³•å¯ä»¥æ˜¯constå—?</a></li><li><a href="#%E8%AF%B7%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAstrcpy%E6%96%B9%E6%B3%95">è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³•</a></li><li><a href="#%E5%86%85%E5%AD%98%E5%A0%86%E6%A0%88%E5%AF%B9%E6%AF%94%E5%88%86%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88%E7%89%B9%E7%82%B9%E5%AE%83%E4%BB%AC%E7%9A%84%E5%88%86%E9%85%8D%E6%95%88%E7%8E%87%E5%A6%82%E4%BD%95">å†…å­˜å †æ ˆå¯¹æ¯”ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•ï¼Ÿ</a></li><li><a href="#i%E5%92%8Ci%E5%93%AA%E4%B8%AA%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98">++iå’Œi++å“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E7%A6%81%E7%94%A8%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</a></li><li><a href="#stdfuture%E5%92%8Cstdpromise%E7%9A%84%E4%BD%9C%E7%94%A8">std::futureå’Œstd::promiseçš„ä½œç”¨</a></li></ul></li><li><a href="#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1">ç±»å’Œå¯¹è±¡</a><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFrtti">ä»€ä¹ˆæ˜¯RTTI</a></li></ul></li><li><a href="#stl">STL</a><ul><li><a href="#map%E5%92%8Cunordered_map%E7%9A%84%E5%8C%BA%E5%88%AB-%E5%90%84%E8%87%AA%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%98%AF%E4%BB%80%E4%B9%88">mapå’Œunordered_mapçš„åŒºåˆ«? å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ul></li><li><a href="#%E5%8F%82%E8%80%83">å‚è€ƒ</a></li></ul></li></ul><h1 id="c-é¢ç»" tabindex="-1"><a class="header-anchor" href="#c-é¢ç»" aria-hidden="true">#</a> c++é¢ç»</h1><h2 id="c-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#c-åŸºç¡€" aria-hidden="true">#</a> c++åŸºç¡€</h2><h3 id="constå…³é”®å­—çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#constå…³é”®å­—çš„ä½œç”¨" aria-hidden="true">#</a> constå…³é”®å­—çš„ä½œç”¨</h3><p>const å…³é”®å­—åœ¨C++ä¸­ç”¨äºå®šä¹‰å¸¸é‡ã€‚å®ƒæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å…³é”®å­—ï¼Œä¸»è¦ç”¨äºå£°æ˜ä¸å¯ä¿®æ”¹çš„å˜é‡ã€æŒ‡é’ˆã€å¼•ç”¨å’Œæˆå‘˜å‡½æ•°ã€‚ä½¿ç”¨ const å¯ä»¥å¸®åŠ©é˜²æ­¢æ„å¤–ä¿®æ”¹æ•°æ®ï¼Œæé«˜ä»£ç çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p><strong>const çš„ä¸»è¦ç”¨æ³•å’Œä½œç”¨</strong></p><p><strong>1.å¸¸é‡å˜é‡:</strong></p><p>ä½¿ç”¨ const å£°æ˜çš„å˜é‡åœ¨åˆå§‹åŒ–åä¸å¯è¢«ä¿®æ”¹ã€‚è¿™å¯¹äºå®šä¹‰ä¸å¯æ”¹å˜çš„å€¼ï¼ˆå¦‚æ•°å­¦å¸¸é‡ï¼‰ç‰¹åˆ«æœ‰ç”¨ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">const</span> <span class="token keyword">int</span> MAX_SIZE <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>ã€
<span class="token comment">// MAX_SIZE ä¸èƒ½è¢«ä¿®æ”¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.å¸¸é‡æŒ‡é’ˆ</strong>:</p><p><strong>æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ</strong>: const ç”¨äºæŒ‡é’ˆå£°æ˜ä¸­ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ä¸å¯ä¿®æ”¹ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span> ptr<span class="token punctuation">;</span>
<span class="token comment">// *ptr ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä½† ptr å¯ä»¥æŒ‡å‘ä¸åŒçš„åœ°å€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¸¸é‡çš„æŒ‡é’ˆ</strong>: const ä¹Ÿå¯ä»¥æ”¾åœ¨æŒ‡é’ˆå‰é¢ï¼Œè¡¨ç¤ºæŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡ï¼Œä¸å¯ä¿®æ”¹ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">int</span><span class="token operator">*</span> <span class="token keyword">const</span> ptr<span class="token punctuation">;</span>
<span class="token comment">// ptr ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä½† *ptr å¯ä»¥è¢«ä¿®æ”¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¸¸é‡æŒ‡é’ˆå’Œå¸¸é‡æ•°æ®</strong>: å¯ä»¥å°† const å…³é”®å­—åº”ç”¨äºæŒ‡é’ˆå’ŒæŒ‡å‘çš„æ•°æ®ï¼Œè¡¨ç¤ºæŒ‡é’ˆå’Œæ•°æ®éƒ½ä¸å¯ä¿®æ”¹ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span> <span class="token keyword">const</span> ptr<span class="token punctuation">;</span>
<span class="token comment">// ptr å’Œ *ptr éƒ½ä¸èƒ½è¢«ä¿®æ”¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.å¸¸é‡å‚æ•°</strong>:</p><p>ä½¿ç”¨ const å¯ä»¥ä¿è¯å‡½æ•°å‚æ•°åœ¨å‡½æ•°å†…éƒ¨ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæé«˜å‡½æ•°çš„å®‰å…¨æ€§å’Œå¯è¯»æ€§ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">processData</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// data ä¸èƒ½è¢«ä¿®æ”¹</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4.å¸¸é‡æˆå‘˜å‡½æ•°:</strong></p><p>åœ¨ç±»ä¸­ï¼Œå¸¸é‡æˆå‘˜å‡½æ•°æ˜¯ä¸ä¼šä¿®æ”¹ç±»æˆå‘˜çš„å‡½æ•°ï¼Œå£°æ˜ä¸º const çš„æˆå‘˜å‡½æ•°å¯ä»¥ä¿è¯ä¸ä¼šæ”¹å˜å¯¹è±¡çš„çŠ¶æ€ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸èƒ½ä¿®æ”¹ç±»çš„æˆå‘˜å˜é‡</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5.å¸¸é‡è¿”å›å€¼:</strong></p><p>å‡½æ•°è¿”å› const å€¼ï¼Œè¡¨ç¤ºè¿”å›çš„å€¼ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™é€šå¸¸ç”¨äºé˜²æ­¢ä¿®æ”¹è¿”å›å¯¹è±¡çš„æˆå‘˜ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨ const çš„å¥½å¤„</strong></p><ul><li>æé«˜å®‰å…¨æ€§: const å…³é”®å­—å¯ä»¥é˜²æ­¢æ•°æ®è¢«æ„å¤–æˆ–é”™è¯¯åœ°ä¿®æ”¹ï¼Œä»è€Œæé«˜ä»£ç çš„ç¨³å®šæ€§ã€‚</li><li>å¢å¼ºå¯è¯»æ€§: æ˜ç¡®è¡¨æ˜æŸäº›æ•°æ®æˆ–å¯¹è±¡ä¸åº”è¯¥è¢«ä¿®æ”¹ï¼Œä½¿ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</li><li>ä¼˜åŒ–ç¼–è¯‘: ç¼–è¯‘å™¨å¯ä»¥åˆ©ç”¨ const ä¿¡æ¯è¿›è¡Œä¼˜åŒ–ï¼Œå› ä¸ºå®ƒçŸ¥é“æŸäº›æ•°æ®åœ¨ä»£ç è¿è¡ŒæœŸé—´ä¸ä¼šå˜åŒ–ã€‚</li></ul><p><strong>æ€»ç»“</strong></p><p>const æ˜¯C++ä¸­çš„ä¸€ä¸ªé‡è¦å…³é”®å­—ï¼Œå¹¿æ³›ç”¨äºå®šä¹‰å¸¸é‡ã€å¸¸é‡æŒ‡é’ˆã€å¸¸é‡å¼•ç”¨ã€å¸¸é‡æˆå‘˜å‡½æ•°ç­‰ã€‚å®ƒä¸ä»…æœ‰åŠ©äºé˜²æ­¢æ•°æ®çš„æ„å¤–ä¿®æ”¹ï¼Œè¿˜æé«˜äº†ä»£ç çš„å®‰å…¨æ€§å’Œå¯è¯»æ€§ã€‚åœ¨è®¾è®¡ç±»å’Œå‡½æ•°æ¥å£æ—¶åˆç†ä½¿ç”¨ const å¯ä»¥å¸®åŠ©åˆ›å»ºæ›´å¯é å’Œç»´æŠ¤å‹å¥½çš„ä»£ç ã€‚</p><h3 id="constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³•" aria-hidden="true">#</a> constæˆå‘˜çš„åˆå§‹åŒ–æ–¹æ³•</h3><ul><li>æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> myConst<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">// æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–constæˆå‘˜</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">myConst</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ„é€ å‡½æ•°ä½“ä¸­ä¸èƒ½å†å¯¹myConstèµ‹å€¼</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;The value of myConst is: &quot;</span> <span class="token operator">&lt;&lt;</span> myConst <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç›´æ¥åœ¨æˆå‘˜å®šä¹‰æ—¶åˆå§‹åŒ–(c++11)</li></ul><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code>class MyClass <span class="token punctuation">{</span>
private<span class="token operator">:</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> myConst <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>  <span class="token comment">// ç›´æ¥åœ¨ç±»å®šä¹‰ä¸­åˆå§‹åŒ–</span>

public<span class="token operator">:</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ„é€ å‡½æ•°ä¸­ä¸éœ€è¦å†åˆå§‹åŒ–myConst</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;The value of myConst is: &quot;</span> <span class="token operator">&lt;&lt;</span> myConst <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ–" aria-hidden="true">#</a> constæˆå‘˜å¼•ç”¨å¦‚ä½•åˆå§‹åŒ–</h3><p>åœ¨C++ä¸­ï¼Œconstæˆå‘˜å¼•ç”¨å¿…é¡»åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºå¼•ç”¨ä¸€æ—¦ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡æˆ–å˜é‡ä¸Šï¼Œå°±ä¸èƒ½å†æŒ‡å‘åˆ«çš„å¯¹è±¡æˆ–å˜é‡ï¼Œå› æ­¤å¿…é¡»åœ¨å¯¹è±¡åˆ›å»ºæ—¶æ˜ç¡®ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ä¸Šã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ref<span class="token punctuation">;</span>  <span class="token comment">// constæˆå‘˜å¼•ç”¨</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">// æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–ref</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> r<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;The value of ref is: &quot;</span> <span class="token operator">&lt;&lt;</span> ref <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> value <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
    MyClass <span class="token function">obj</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ›å»ºå¯¹è±¡æ—¶ä¼ å…¥å¼•ç”¨çš„å˜é‡</span>
    obj<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡ºï¼šThe value of ref is: 42</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³" tabindex="-1"><a class="header-anchor" href="#constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³" aria-hidden="true">#</a> constæˆå‘˜å‡½æ•°å†…éƒ¨éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡å¦‚ä½•è§£å†³ï¼Ÿ</h3><ul><li>ä½¿ç”¨mutableå…³é”®å­—</li></ul><p>mutableå…³é”®å­—å¯ä»¥ç”¨äºç±»çš„æˆå‘˜å˜é‡ï¼Œä½¿å¾—è¿™ä¸ªå˜é‡å³ä½¿åœ¨constæˆå‘˜å‡½æ•°ä¸­ä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ã€‚</p><p>ä¾‹å­ï¼šä½¿ç”¨mutableåœ¨constæˆå‘˜å‡½æ•°ä¸­ä¿®æ”¹æˆå‘˜å˜é‡</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">mutable</span> <span class="token keyword">int</span> mutableCounter<span class="token punctuation">;</span>  <span class="token comment">// å¯å˜æˆå‘˜ï¼Œå³ä½¿åœ¨constå‡½æ•°ä¸­ä¹Ÿå¯ä»¥ä¿®æ”¹</span>
    <span class="token keyword">int</span> normalCounter<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">mutableCounter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">normalCounter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">incrementCounters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        mutableCounter<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token comment">// å¯ä»¥ä¿®æ”¹ï¼Œå› ä¸ºmutableCounteræ˜¯mutableçš„</span>
        <span class="token comment">// normalCounter++;  // é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹émutableçš„æˆå‘˜</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">displayCounters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Mutable Counter: &quot;</span> <span class="token operator">&lt;&lt;</span> mutableCounter <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Normal Counter: &quot;</span> <span class="token operator">&lt;&lt;</span> normalCounter <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    MyClass obj<span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">incrementCounters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è°ƒç”¨constæˆå‘˜å‡½æ•°</span>
    obj<span class="token punctuation">.</span><span class="token function">displayCounters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡ºï¼šMutable Counter: 1, Normal Counter: 0</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨const_castè¿›è¡Œç±»å‹è½¬æ¢</li></ul><p>const_castæ˜¯C++ä¸­çš„ä¸€ç§ç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼Œå®ƒå¯ä»¥ç”¨äºå»é™¤å¯¹è±¡çš„constå±æ€§ï¼Œä»è€Œå…è®¸ä¿®æ”¹constå¯¹è±¡çš„æˆå‘˜ã€‚ä½†è¿™ç§æ–¹æ³•åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¯èƒ½ç ´åconstçš„è¯­ä¹‰ï¼Œå¯¼è‡´ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ä¸‹é™ã€‚</p><p>ç¤ºä¾‹ï¼šä½¿ç”¨const_castå»é™¤constå±æ€§</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> counter<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨const_castå»é™¤thisæŒ‡é’ˆçš„constå±æ€§ï¼Œå…è®¸ä¿®æ”¹counter</span>
        <span class="token generic-function"><span class="token function">const_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>MyClass<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>counter<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">// ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¯¥æˆå‘˜ï¼Œä½¿ç”¨const_castå»é™¤constå±æ€§</span>
        <span class="token keyword">int</span><span class="token operator">*</span> temp <span class="token operator">=</span><span class="token generic-function"><span class="token function">const_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>temp<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">displayCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Counter: &quot;</span> <span class="token operator">&lt;&lt;</span> counter <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    MyClass obj<span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">incrementCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è°ƒç”¨constæˆå‘˜å‡½æ•°</span>
    obj<span class="token punctuation">.</span><span class="token function">displayCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡ºï¼šCounter: 1</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒincrementCounter æ˜¯ä¸€ä¸ª const æˆå‘˜å‡½æ•°ï¼Œä½†é€šè¿‡ const_castï¼Œæˆ‘ä»¬å¯ä»¥å»é™¤ this æŒ‡é’ˆçš„ const å±æ€§ï¼Œä»è€Œä¿®æ”¹ counter æˆå‘˜å˜é‡ã€‚</p><p>æ³¨æ„ï¼šè¿™ç§æ–¹æ³•åº”è°¨æ…ä½¿ç”¨ï¼Œåªæœ‰åœ¨æ˜ç¡®çŸ¥é“è¿™æ ·åšæ˜¯å®‰å…¨çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨ const_castã€‚å¦‚æœæ»¥ç”¨å®ƒï¼Œå¯èƒ½ä¼šå¯¼è‡´éš¾ä»¥å‘ç°çš„é”™è¯¯å’Œæœªå®šä¹‰è¡Œä¸ºã€‚</p><h3 id="è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—" tabindex="-1"><a class="header-anchor" href="#è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—" aria-hidden="true">#</a> è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸ä¸€æ ·å—ï¼Ÿ</h3><p>åœ¨C++ä¸­ï¼Œè™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥æœ‰æ‰€ä¸åŒï¼Œä½†åªèƒ½åœ¨ç‰¹å®šæƒ…å†µä¸‹å®ç°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè™šå‡½æ•°åœ¨åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯ç›¸åŒçš„ï¼Œä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼šåå˜è¿”å›ç±»å‹ï¼ˆcovariant return typesï¼‰ã€‚</p><p>åå˜è¿”å›ç±»å‹ åå˜è¿”å›ç±»å‹å…è®¸æ´¾ç”Ÿç±»ä¸­çš„è™šå‡½æ•°è¿”å›ç±»å‹ä¸åŸºç±»ä¸­çš„è™šå‡½æ•°è¿”å›ç±»å‹ä¸åŒï¼Œä½†å‰ææ˜¯æ´¾ç”Ÿç±»çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯åŸºç±»è¿”å›ç±»å‹çš„æ´¾ç”Ÿç±»ã€‚æ¢å¥è¯è¯´ï¼Œæ´¾ç”Ÿç±»ä¸­çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯åŸºç±»ä¸­è¿”å›ç±»å‹çš„â€œå­ç±»å‹â€ã€‚</p><p>ç¤ºä¾‹ï¼šåå˜è¿”å›ç±»å‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> Base<span class="token operator">*</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Base clone&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">Base</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">// è¿”å›ç±»å‹æ˜¯Base*çš„æ´¾ç”Ÿç±»å‹Derived*</span>
    Derived<span class="token operator">*</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Derived clone&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">Derived</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Base<span class="token operator">*</span> base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Base<span class="token operator">*</span> derived <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Base<span class="token operator">*</span> baseClone <span class="token operator">=</span> base<span class="token operator">-&gt;</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è°ƒç”¨Baseçš„cloneæ–¹æ³•</span>
    Base<span class="token operator">*</span> derivedClone <span class="token operator">=</span> derived<span class="token operator">-&gt;</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è°ƒç”¨Derivedçš„cloneæ–¹æ³•</span>

    <span class="token keyword">delete</span> base<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> derived<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> baseClone<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> derivedClone<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŸºç±» Base æœ‰ä¸€ä¸ªè™šå‡½æ•° cloneï¼Œå®ƒè¿”å›ä¸€ä¸ªæŒ‡å‘ Base ç±»å‹çš„æŒ‡é’ˆï¼ˆBase*ï¼‰ã€‚æ´¾ç”Ÿç±» Derived é‡å†™äº† clone å‡½æ•°ï¼Œå¹¶å°†è¿”å›ç±»å‹æ›´æ”¹ä¸º Derived*ï¼Œè¿™æ˜¯å…è®¸çš„ï¼Œå› ä¸º Derived* æ˜¯ Base* çš„æ´¾ç”Ÿç±»å‹ã€‚</p><p><strong>å…³é”®ç‚¹æ€»ç»“</strong></p><ul><li>åå˜è¿”å›ç±»å‹å…è®¸æ´¾ç”Ÿç±»ä¸­çš„è™šå‡½æ•°è¿”å›ç±»å‹ä¸åŸºç±»ä¸­çš„ä¸åŒï¼Œä½†å‰ææ˜¯æ´¾ç”Ÿç±»ä¸­çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯åŸºç±»è¿”å›ç±»å‹çš„æ´¾ç”Ÿç±»å‹ã€‚</li><li>è¿”å›ç±»å‹ä¹‹é—´çš„å…³ç³»å¿…é¡»æ˜¯åŸºç±»ä¸æ´¾ç”Ÿç±»çš„å…³ç³»ï¼Œå³æ´¾ç”Ÿç±»ä¸­çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯åŸºç±»è¿”å›ç±»å‹çš„æ´¾ç”Ÿç±»ã€‚</li><li>é™¤äº†åå˜è¿”å›ç±»å‹ä¹‹å¤–ï¼Œè™šå‡½æ•°åœ¨åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­çš„è¿”å›ç±»å‹å¿…é¡»ä¸¥æ ¼ç›¸åŒã€‚</li><li>ä½¿ç”¨åå˜è¿”å›ç±»å‹å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­å®ç°æ›´çµæ´»çš„å¤šæ€æ€§ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦è¿”å›æ´¾ç”Ÿç±»å¯¹è±¡çš„åœºæ™¯ä¸­ã€‚</li></ul><h3 id="dynamic-castå¤±è´¥ä¼šæ€ä¹ˆæ ·" tabindex="-1"><a class="header-anchor" href="#dynamic-castå¤±è´¥ä¼šæ€ä¹ˆæ ·" aria-hidden="true">#</a> dynamic_castå¤±è´¥ä¼šæ€ä¹ˆæ ·ï¼Ÿ</h3><p>åœ¨C++ä¸­ï¼Œdynamic_cast æ˜¯ä¸€ç§ç±»å‹è½¬æ¢è¿ç®—ç¬¦ï¼Œç”¨äºåœ¨å¤šæ€ç±»å‹ï¼ˆå³å¸¦æœ‰è™šå‡½æ•°çš„ç±»ï¼‰ä¹‹é—´è¿›è¡Œå®‰å…¨çš„å‘ä¸‹è½¬æ¢ï¼ˆdowncastingï¼‰ã€‚dynamic_cast åœ¨è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œä¼šæœ‰ä¸¤ç§ä¸åŒçš„è¡Œä¸ºï¼Œå…·ä½“å–å†³äºè½¬æ¢çš„ç›®æ ‡ç±»å‹ï¼š</p><ul><li>è½¬æ¢ä¸ºæŒ‡é’ˆç±»å‹ å¦‚æœ dynamic_cast è½¬æ¢çš„æ˜¯æŒ‡é’ˆç±»å‹ï¼ˆä¾‹å¦‚ï¼Œä» Base* è½¬æ¢ä¸º Derived*ï¼‰ï¼Œå¹¶ä¸”è½¬æ¢å¤±è´¥ï¼ˆå³ç›®æ ‡ç±»å‹ä¸å®é™…å¯¹è±¡çš„ç±»å‹ä¸åŒ¹é…ï¼‰ï¼Œé‚£ä¹ˆè¿”å›å€¼å°†æ˜¯ nullptrã€‚</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>  <span class="token comment">// å¿…é¡»æœ‰è™šå‡½æ•°ä»¥ä½¿dynamic_castæ­£å¸¸å·¥ä½œ</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Base<span class="token operator">*</span> base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Derived<span class="token operator">*</span> derived <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Derived<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å°è¯•å°†Base*è½¬æ¢ä¸ºDerived*</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>derived <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;dynamic_cast failed, returned nullptr.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">delete</span> base<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äº base å®é™…ä¸Šæ˜¯ Base ç±»å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ Derived ç±»å‹ï¼Œdynamic_cast&lt;Derived*&gt;(base) å°†è¿”å› nullptrã€‚</p><ul><li>è½¬æ¢ä¸ºå¼•ç”¨ç±»å‹</li></ul><p>å¦‚æœ dynamic_cast è½¬æ¢çš„æ˜¯å¼•ç”¨ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œä» Base&amp; è½¬æ¢ä¸º Derived&amp;ï¼‰ï¼Œå¹¶ä¸”è½¬æ¢å¤±è´¥ï¼Œdynamic_cast ä¼šæŠ›å‡º std::bad_cast å¼‚å¸¸ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;typeinfo&gt;</span>  <span class="token comment">// éœ€è¦åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶æ¥å¤„ç†std::bad_castå¼‚å¸¸</span></span>

<span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>  <span class="token comment">// å¿…é¡»æœ‰è™šå‡½æ•°ä»¥ä½¿dynamic_castæ­£å¸¸å·¥ä½œ</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        Base base<span class="token punctuation">;</span>
        Derived<span class="token operator">&amp;</span> derived <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Derived<span class="token operator">&amp;</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å°è¯•å°†Base&amp;è½¬æ¢ä¸ºDerived&amp;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>bad_cast<span class="token operator">&amp;</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;dynamic_cast failed, caught exception: &quot;</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œbase æ˜¯ä¸€ä¸ª Base ç±»å‹çš„å¯¹è±¡ï¼Œdynamic_cast&lt;Derived&amp;&gt;(base) è¯•å›¾å°†å…¶è½¬æ¢ä¸º Derived&amp; ç±»å‹çš„å¼•ç”¨ï¼Œä½†æ˜¯ç”±äºç±»å‹ä¸åŒ¹é…ï¼Œè½¬æ¢å¤±è´¥å¹¶æŠ›å‡ºäº† std::bad_cast å¼‚å¸¸ã€‚</p><p><strong>å…³é”®ç‚¹æ€»ç»“</strong></p><ul><li>æŒ‡é’ˆç±»å‹è½¬æ¢å¤±è´¥ï¼šdynamic_cast è¿”å› nullptrã€‚</li><li>å¼•ç”¨ç±»å‹è½¬æ¢å¤±è´¥ï¼šdynamic_cast æŠ›å‡º std::bad_cast å¼‚å¸¸ã€‚</li><li>å‰ææ¡ä»¶ï¼šdynamic_cast åªèƒ½ç”¨äºå¤šæ€ç±»å‹ï¼Œå³ç±»å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªè™šå‡½æ•°ï¼ˆé€šå¸¸æ˜¯è™šææ„å‡½æ•°ï¼‰ã€‚</li><li>dynamic_cast æ˜¯ä¸€ç§è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥æœºåˆ¶ï¼Œç”¨äºå®‰å…¨çš„å‘ä¸‹è½¬æ¢ï¼Œä»¥é¿å…æœªå®šä¹‰è¡Œä¸ºã€‚å¦‚æœè½¬æ¢å¯èƒ½å¤±è´¥ï¼Œä½¿ç”¨ dynamic_cast æ˜¯ä¸€ç§å®‰å…¨çš„é€‰æ‹©ã€‚</li></ul><h3 id="å¤šé‡ç»§æ‰¿æ—¶-æŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»-æŒ‡é’ˆä¼šå˜å—" tabindex="-1"><a class="header-anchor" href="#å¤šé‡ç»§æ‰¿æ—¶-æŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»-æŒ‡é’ˆä¼šå˜å—" aria-hidden="true">#</a> å¤šé‡ç»§æ‰¿æ—¶ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬åŒ–ä¸ºåŸºç±»ï¼ŒæŒ‡é’ˆä¼šå˜å—?</h3><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>
åœ¨C<span class="token operator">++</span>ä¸­ï¼Œä½¿ç”¨å¤šé‡ç»§æ‰¿æ—¶ï¼Œå°†æŒ‡å‘å­ç±»å¯¹è±¡çš„æŒ‡é’ˆè½¬æ¢ä¸ºåŸºç±»æŒ‡é’ˆæ—¶ï¼ŒæŒ‡é’ˆçš„å€¼å¯èƒ½ä¼šæ”¹å˜ã€‚è¿™ä¸ªå˜åŒ–å–å†³äºåŸºç±»åœ¨å­ç±»ä¸­çš„ä½ç½®ï¼Œå› ä¸ºå¤šé‡ç»§æ‰¿å¯èƒ½ä¼šå¯¼è‡´ä¸åŒçš„åŸºç±»åœ¨å­ç±»å¯¹è±¡ä¸­çš„å­˜å‚¨ä½ç½®ä¸åŒã€‚

è¯¦ç»†è§£é‡Š
<span class="token number">1.</span> å•ä¸€ç»§æ‰¿çš„æƒ…å†µ
å¦‚æœåªæœ‰å•ä¸€ç»§æ‰¿ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬æ¢ä¸ºåŸºç±»æŒ‡é’ˆæ—¶ï¼ŒæŒ‡é’ˆçš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚è¿™æ˜¯å› ä¸ºåœ¨å†…å­˜å¸ƒå±€ä¸­ï¼Œå­ç±»å¯¹è±¡çš„åŸºç±»å­å¯¹è±¡é€šå¸¸ä½äºå­ç±»å¯¹è±¡çš„å¼€å¤´ã€‚

<span class="token number">2.</span> å¤šé‡ç»§æ‰¿çš„æƒ…å†µ
åœ¨å¤šé‡ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œå­ç±»å¯¹è±¡ä¸­ä¸åŒçš„åŸºç±»å­å¯¹è±¡å¯èƒ½åœ¨ä¸åŒçš„å†…å­˜åœ°å€ä¸Šã€‚å°†æŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬æ¢ä¸ºæŸä¸ªåŸºç±»æŒ‡é’ˆæ—¶ï¼ŒæŒ‡é’ˆçš„å€¼å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»¥æ­£ç¡®æŒ‡å‘è¯¥åŸºç±»åœ¨å­ç±»å¯¹è±¡å†…çš„åœ°å€ã€‚

```cpp
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">Base1</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Base1&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Base2</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Base2&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base1</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Base2</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Derived&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Derived d<span class="token punctuation">;</span>
    Derived<span class="token operator">*</span> derivedPtr <span class="token operator">=</span> <span class="token operator">&amp;</span>d<span class="token punctuation">;</span>

    Base1<span class="token operator">*</span> base1Ptr <span class="token operator">=</span> derivedPtr<span class="token punctuation">;</span>  <span class="token comment">// è½¬æ¢ä¸ºBase1æŒ‡é’ˆ</span>
    Base2<span class="token operator">*</span> base2Ptr <span class="token operator">=</span> derivedPtr<span class="token punctuation">;</span>  <span class="token comment">// è½¬æ¢ä¸ºBase2æŒ‡é’ˆ</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Derived pointer: &quot;</span> <span class="token operator">&lt;&lt;</span> derivedPtr <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Base1 pointer: &quot;</span> <span class="token operator">&lt;&lt;</span> base1Ptr <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Base2 pointer: &quot;</span> <span class="token operator">&lt;&lt;</span> base2Ptr <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç¤ºä¾‹ï¼ˆå®é™…è¾“å‡ºå¯èƒ½ä¼šå› ç¼–è¯‘å™¨å’Œå†…å­˜å¸ƒå±€è€Œå¼‚ï¼‰ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Derived pointer: 0x7fffd738abc0
Base1 pointer: 0x7fffd738abc0
Base2 pointer: 0x7fffd738abc8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>derivedPtrï¼šæŒ‡å‘æ•´ä¸ª Derived å¯¹è±¡ã€‚ base1Ptrï¼šæŒ‡å‘ Base1 çš„å­å¯¹è±¡ã€‚ç”±äº Base1 æ˜¯ç¬¬ä¸€ä¸ªç»§æ‰¿çš„åŸºç±»ï¼Œbase1Ptr å’Œ derivedPtr æŒ‡å‘ç›¸åŒçš„åœ°å€ã€‚ base2Ptrï¼šæŒ‡å‘ Base2 çš„å­å¯¹è±¡ã€‚ç”±äº Base2 åœ¨ Derived å¯¹è±¡ä¸­å¯èƒ½ä½äºä¸åŒçš„ä½ç½®ï¼Œbase2Ptr çš„å€¼å¯èƒ½ä¸åŒäº derivedPtr å’Œ base1Ptrã€‚</p><p><strong>å…³é”®ç‚¹æ€»ç»“</strong></p><ul><li>å•ä¸€ç»§æ‰¿æ—¶ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬æ¢ä¸ºåŸºç±»æŒ‡é’ˆï¼ŒæŒ‡é’ˆçš„å€¼é€šå¸¸ä¸ä¼šæ”¹å˜ã€‚</li><li>å¤šé‡ç»§æ‰¿æ—¶ï¼ŒæŒ‡å‘å­ç±»çš„æŒ‡é’ˆè½¬æ¢ä¸ºåŸºç±»æŒ‡é’ˆï¼ŒæŒ‡é’ˆçš„å€¼å¯èƒ½ä¼šæ”¹å˜ï¼Œä»¥æ­£ç¡®æŒ‡å‘è¯¥åŸºç±»å­å¯¹è±¡åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚</li></ul><p>è¿™ç§å˜åŒ–æ˜¯ç”±äºå†…å­˜å¸ƒå±€ä¸­ä¸åŒåŸºç±»çš„å­˜å‚¨ä½ç½®ä¸åŒå¯¼è‡´çš„ã€‚</p><h3 id="å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ" tabindex="-1"><a class="header-anchor" href="#å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ" aria-hidden="true">#</a> å¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„å†…å­˜åˆ†å¸ƒ</h3><p>å½“ç±»ç»“æ„ä¸­å¼•å…¥è™šå‡½æ•°æ—¶ï¼Œå†…å­˜å¸ƒå±€ä¼šå˜å¾—æ›´å¤æ‚ï¼Œå› ä¸ºéœ€è¦å¼•å…¥è™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰å’Œè™šå‡½æ•°è¡¨æŒ‡é’ˆï¼ˆvptrï¼‰æ¥æ”¯æŒåŠ¨æ€å¤šæ€æ€§ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¦æœ‰è™šå‡½æ•°çš„å¤šé‡ç»§æ‰¿çš„ä¾‹å­ï¼ŒåŸºäºC++ã€‚</p><p>å‡è®¾æœ‰ä»¥ä¸‹ç±»å®šä¹‰ï¼š</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Base1</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Base2</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> b<span class="token punctuation">;</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base1</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Base2</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> c<span class="token punctuation">;</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li>Base1 æœ‰ä¸€ä¸ªæ•´æ•°æˆå‘˜ a å’Œä¸€ä¸ªè™šå‡½æ•° func1()ã€‚</li><li>Base2 æœ‰ä¸€ä¸ªæ•´æ•°æˆå‘˜ b å’Œä¸€ä¸ªè™šå‡½æ•° func2()ã€‚</li><li>Derived ç±»ä» Base1 å’Œ Base2 ç»§æ‰¿ï¼Œæœ‰ä¸€ä¸ªé¢å¤–çš„æ•´æ•°æˆå‘˜ cï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªæ–°çš„è™šå‡½æ•° func3()ã€‚</li></ul><p><strong>å†…å­˜åˆ†å¸ƒ</strong></p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†…å­˜å¸ƒå±€åŒ…æ‹¬ï¼š</p><ul><li>æ¯ä¸ªç±»çš„æˆå‘˜å˜é‡ã€‚</li><li>æ¯ä¸ªç±»çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼ˆvptrï¼‰ã€‚</li></ul><p>å‡è®¾ int å  4 å­—èŠ‚ï¼ŒæŒ‡é’ˆï¼ˆvptrï¼‰å  8 å­—èŠ‚ï¼ˆ64ä½ç³»ç»Ÿï¼‰ï¼Œå†…å­˜å¸ƒå±€å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Derived å¯¹è±¡å†…å­˜åˆ†å¸ƒ:
+-------------------+
<span class="token operator">|</span> vptr<span class="token punctuation">(</span>Base1<span class="token punctuation">)</span>       <span class="token operator">|</span>  <span class="token operator">&lt;</span>- è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘ Base1 çš„è™šå‡½æ•°è¡¨
+-------------------+
<span class="token operator">|</span> Base1::a          <span class="token operator">|</span>
+-------------------+
<span class="token operator">|</span> vptr<span class="token punctuation">(</span>Base2<span class="token punctuation">)</span>       <span class="token operator">|</span>  <span class="token operator">&lt;</span>- è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘ Base2 çš„è™šå‡½æ•°è¡¨
+-------------------+
<span class="token operator">|</span> Base2::b          <span class="token operator">|</span>
+-------------------+
<span class="token operator">|</span> Derived::c        <span class="token operator">|</span>
+-------------------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å…·ä½“å†…å­˜åˆ†å¸ƒ</strong></p><p>Base1 çš„éƒ¨åˆ†ï¼š</p><ul><li>vptr(Base1) æŒ‡é’ˆå ç”¨å‰ 8 å­—èŠ‚ï¼ŒæŒ‡å‘ Base1 çš„è™šå‡½æ•°è¡¨ã€‚</li><li>Base1::a ç´§æ¥ç€å ç”¨ 4 å­—èŠ‚ã€‚</li></ul><p>Base2 çš„éƒ¨åˆ†ï¼š</p><ul><li>vptr(Base2) æŒ‡é’ˆç´§éšå…¶åï¼Œå ç”¨ 8 å­—èŠ‚ï¼ŒæŒ‡å‘ Base2 çš„è™šå‡½æ•°è¡¨ã€‚</li><li>Base2::b ç´§æ¥ç€å ç”¨ 4 å­—èŠ‚ã€‚</li></ul><p>Derived çš„éƒ¨åˆ†ï¼š</p><ul><li>Derived::c ç´§æ¥ç€å ç”¨ 4 å­—èŠ‚ã€‚</li></ul><p>å†…å­˜å¸ƒå±€å›¾ç¤º</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>+-------------------+  <span class="token operator">&lt;</span>- Offset <span class="token number">0</span>
<span class="token operator">|</span> vptr<span class="token punctuation">(</span>Base1<span class="token punctuation">)</span>       <span class="token operator">|</span>  <span class="token punctuation">(</span>æŒ‡å‘ Base1 çš„è™šå‡½æ•°è¡¨<span class="token punctuation">)</span>
+-------------------+  <span class="token operator">&lt;</span>- Offset <span class="token number">8</span>
<span class="token operator">|</span> Base1::a          <span class="token operator">|</span>
+-------------------+  <span class="token operator">&lt;</span>- Offset <span class="token number">12</span>
<span class="token operator">|</span> vptr<span class="token punctuation">(</span>Base2<span class="token punctuation">)</span>       <span class="token operator">|</span>  <span class="token punctuation">(</span>æŒ‡å‘ Base2 çš„è™šå‡½æ•°è¡¨<span class="token punctuation">)</span>
+-------------------+  <span class="token operator">&lt;</span>- Offset <span class="token number">20</span>
<span class="token operator">|</span> Base2::b          <span class="token operator">|</span>
+-------------------+  <span class="token operator">&lt;</span>- Offset <span class="token number">24</span>
<span class="token operator">|</span> Derived::c        <span class="token operator">|</span>
+-------------------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™šå‡½æ•°è¡¨çš„å½±å“</p><ul><li>Derived ç±»å®é™…ä¸Šæœ‰ä¸¤ä¸ªè™šå‡½æ•°è¡¨ï¼Œä¸€ä¸ªæ˜¯ä¸º Base1 æœåŠ¡çš„ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸º Base2 æœåŠ¡çš„ã€‚</li><li>æ¯ä¸ª vptr æŒ‡é’ˆæŒ‡å‘ç›¸åº”ç±»çš„è™šå‡½æ•°è¡¨ï¼Œå½“è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œç¨‹åºä¼šé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ‰¾åˆ°åˆé€‚çš„å‡½æ•°å®ç°ã€‚</li></ul><p><strong>è™šæ‹Ÿç»§æ‰¿çš„å½±å“</strong></p><ul><li>å¦‚æœä½¿ç”¨è™šæ‹Ÿç»§æ‰¿ï¼Œæƒ…å†µä¼šæ›´å¤æ‚ã€‚è™šæ‹Ÿç»§æ‰¿é€šå¸¸å¼•å…¥é¢å¤–çš„å¼€é”€ï¼Œä¾‹å¦‚å…±äº«åŸºç±»çš„æŒ‡é’ˆæˆ–åç§»é‡æ¥ç¡®ä¿å•ä¸€å®ä¾‹åŒ–ã€‚</li></ul><p><strong>æ€»ç»“</strong></p><p>è™šå‡½æ•°ä½¿å¾—æ¯ä¸ªç±»çš„å¯¹è±¡éœ€è¦å­˜å‚¨è™šå‡½æ•°è¡¨æŒ‡é’ˆ vptrï¼Œå¹¶ä¸”åœ¨å¤šé‡ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªçˆ¶ç±»éƒ½ä¼šæœ‰è‡ªå·±çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆã€‚è¿™æ ·ï¼Œå†…å­˜å¸ƒå±€ä¸ä»…åŒ…å«æ•°æ®æˆå‘˜çš„é¡ºåºï¼Œè¿˜åŒ…å«æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œè¿™äº›æŒ‡é’ˆåœ¨åŠ¨æ€å¤šæ€ä¸­èµ·åˆ°å…³é”®ä½œç”¨ã€‚</p><h3 id="staticæ–¹æ³•å¯ä»¥æ˜¯constå—" tabindex="-1"><a class="header-anchor" href="#staticæ–¹æ³•å¯ä»¥æ˜¯constå—" aria-hidden="true">#</a> staticæ–¹æ³•å¯ä»¥æ˜¯constå—?</h3><p>åœ¨C++ä¸­ï¼Œstaticæ–¹æ³•ä¸èƒ½è¢«å£°æ˜ä¸ºconstã€‚è¿™æ˜¯å› ä¸ºconstæˆå‘˜å‡½æ•°æ˜¯ç”¨æ¥ä¿è¯è¯¥æˆå‘˜å‡½æ•°ä¸ä¼šä¿®æ”¹å…¶æ‰€å±å¯¹è±¡çš„çŠ¶æ€ã€‚è€Œstaticæ–¹æ³•å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯æŸä¸ªå…·ä½“çš„å¯¹è±¡å®ä¾‹ï¼Œå› æ­¤å®ƒä»¬ä¸èƒ½è®¿é—®ä»»ä½•éé™æ€æˆå‘˜å˜é‡ï¼Œä¹Ÿä¸å­˜åœ¨ä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„é—®é¢˜ã€‚</p><p><strong>è¯¦ç»†è§£é‡Š</strong></p><ul><li>constæˆå‘˜å‡½æ•°ï¼š <ul><li>constæˆå‘˜å‡½æ•°æ˜¯æŒ‡å‡½æ•°çš„å£°æ˜ä¸­æœ‰ä¸€ä¸ªconstå…³é”®å­—ï¼Œé€šå¸¸æ”¾åœ¨å‡½æ•°å£°æ˜çš„æœ«å°¾ã€‚</li><li>è¯¥å…³é”®å­—è¡¨ç¤ºè¯¥å‡½æ•°ä¸ä¼šä¿®æ”¹å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œé€‚ç”¨äºå®ä¾‹æ–¹æ³•ã€‚</li></ul></li></ul><p>ä¾‹å¦‚ï¼š</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> x<span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">myMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token comment">// This method cannot modify the member variable x.</span>
        <span class="token comment">// x = 10; // This would be an error.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>staticæˆå‘˜å‡½æ•°ï¼š</p><p>staticæˆå‘˜å‡½æ•°å±äºæ•´ä¸ªç±»ï¼Œè€Œä¸æ˜¯æŸä¸ªå…·ä½“çš„å¯¹è±¡å®ä¾‹ã€‚</p><p>å®ƒä»¬ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜å˜é‡å’Œéé™æ€æˆå‘˜å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¾èµ–äºå¯¹è±¡çš„thisæŒ‡é’ˆã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">myStaticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// This method cannot access non-static members.</span>
        <span class="token comment">// x = 10; // This would be an error if x were non-static.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸ºä»€ä¹ˆstaticæ–¹æ³•ä¸èƒ½æ˜¯const</strong></p><ul><li><p>staticæˆå‘˜å‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼š</p><ul><li>constå…³é”®å­—åœ¨æˆå‘˜å‡½æ•°ä¸­ä½¿ç”¨æ˜¯ä¸ºäº†ä¿®é¥°éšå«çš„thisæŒ‡é’ˆï¼Œä½¿å…¶æŒ‡å‘çš„å¯¹è±¡æ˜¯constçš„ã€‚</li><li>ç”±äºstaticæˆå‘˜å‡½æ•°ä¸ä¾èµ–äºä»»ä½•å¯¹è±¡å®ä¾‹ï¼Œå› æ­¤æ²¡æœ‰thisæŒ‡é’ˆï¼Œä¹Ÿå°±æ²¡æœ‰å¯ä»¥ä¿®é¥°çš„å¯¹è±¡ã€‚</li></ul></li><li><p>constå…³é”®å­—å¯¹staticæˆå‘˜å‡½æ•°æ— æ„ä¹‰ï¼š</p></li><li><p>å› ä¸ºstaticæˆå‘˜å‡½æ•°ä¸ä¸ä»»ä½•ç‰¹å®šçš„å¯¹è±¡å®ä¾‹å…³è”ï¼Œä¸å¯èƒ½ä¿®æ”¹å¯¹è±¡çŠ¶æ€ï¼Œæ‰€ä»¥å°†staticæˆå‘˜å‡½æ•°å£°æ˜ä¸ºconstæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p></li></ul><p>å› æ­¤ï¼ŒC++ä¸å…è®¸staticæ–¹æ³•è¢«å£°æ˜ä¸ºconstã€‚</p><h3 id="è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³•" aria-hidden="true">#</a> è¯·å®ç°ä¸€ä¸ªstrcpyæ–¹æ³•</h3><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token comment">// å®ç° strcpy å‡½æ•°</span>
<span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">my_strcpy</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> destination<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span><span class="token operator">*</span> ptr <span class="token operator">=</span> destination<span class="token punctuation">;</span>

    <span class="token comment">// å¤åˆ¶æºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦åˆ°ç›®æ ‡å­—ç¬¦ä¸²</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">*</span>source <span class="token operator">!=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">*</span>ptr<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>source<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç¡®ä¿ç›®æ ‡å­—ç¬¦ä¸²ä»¥ &#39;\0&#39; ç»“å°¾</span>
    <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> destination<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> source<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> destination<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// ç›®æ ‡å­—ç¬¦ä¸²çš„å¤§å°åº”è¶³å¤Ÿå®¹çº³æºå­—ç¬¦ä¸²</span>

    <span class="token comment">// ä½¿ç”¨è‡ªå®šä¹‰çš„ strcpy å‡½æ•°</span>
    <span class="token function">my_strcpy</span><span class="token punctuation">(</span>destination<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è¾“å‡ºå¤åˆ¶åçš„ç›®æ ‡å­—ç¬¦ä¸²</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Copied string: %s\n&quot;</span><span class="token punctuation">,</span> destination<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå‡½æ•°éœ€è¦è¿”å›<code>char*</code>ï¼Œä¸»è¦æ˜¯å› ä¸ºï¼š</p><ul><li>é“¾å¼è°ƒç”¨ï¼ˆChainingï¼‰ï¼š</li></ul><p>ç”±äºstrcpyè¿”å›destinationï¼Œå¯ä»¥åœ¨ä¸€æ¡è¯­å¥ä¸­è¿›è¡Œå¤šä¸ªæ“ä½œã€‚ä¾‹å¦‚ï¼š</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">char</span> destination<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">strcpy</span><span class="token punctuation">(</span>destination<span class="token punctuation">,</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¸€è‡´çš„å‡½æ•°æ¥å£è®¾è®¡ï¼š</li></ul><p>åœ¨Cæ ‡å‡†åº“ä¸­ï¼Œè®¸å¤šå­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼ˆä¾‹å¦‚strcatã€strncpyç­‰ï¼‰éƒ½ä¼šè¿”å›ç›®æ ‡å­—ç¬¦ä¸²æŒ‡é’ˆã€‚è¿™ç§è®¾è®¡æä¾›äº†ä¸€ç§ä¸€è‡´çš„æ¥å£ï¼Œä½¿å¾—å‡½æ•°çš„è¡Œä¸ºå’Œä½¿ç”¨æ–¹å¼æ›´å…·ä¸€è‡´æ€§å’Œå¯é¢„æµ‹æ€§ã€‚</p><ul><li>å¢å¼ºä»£ç çš„çµæ´»æ€§ï¼š</li></ul><p>è¿”å›ç›®æ ‡å­—ç¬¦ä¸²æŒ‡é’ˆå¯ä»¥å¢å¼ºä»£ç çš„çµæ´»æ€§ï¼Œä½¿è°ƒç”¨è€…å¯ä»¥åœ¨éœ€è¦æ—¶ä½¿ç”¨è¿”å›å€¼ï¼Œæˆ–å¿½ç•¥å®ƒã€‚ä¾‹å¦‚ï¼š</p><div class="language-c line-numbers-mode" data-ext="c"><pre class="language-c"><code><span class="token keyword">char</span> destination<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> <span class="token operator">*</span>result <span class="token operator">=</span> <span class="token function">strcpy</span><span class="token punctuation">(</span>destination<span class="token punctuation">,</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Copied string: %s\n&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å†…å­˜å †æ ˆå¯¹æ¯”-åˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹-å®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•" tabindex="-1"><a class="header-anchor" href="#å†…å­˜å †æ ˆå¯¹æ¯”-åˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹-å®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•" aria-hidden="true">#</a> å†…å­˜å †æ ˆå¯¹æ¯”ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå®ƒä»¬çš„åˆ†é…æ•ˆç‡å¦‚ä½•ï¼Ÿ</h3><p><strong>æ ˆï¼ˆStackï¼‰</strong></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å†…å­˜åˆ†é…æ–¹å¼ï¼šæ ˆæ˜¯ä¸€ä¸ªè¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œå†…å­˜åˆ†é…å’Œé‡Šæ”¾éµå¾ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼ŒLast In First Outï¼‰åŸåˆ™ã€‚</li><li>ç®¡ç†æ–¹å¼ï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶ã€‚å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ ˆå¸§ä¼šè‡ªåŠ¨åˆ†é…ï¼Œå‡½æ•°è¿”å›æ—¶ï¼Œæ ˆå¸§ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚</li><li>ç”Ÿå‘½å‘¨æœŸï¼šå˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å…¶æ‰€åœ¨çš„ä½œç”¨åŸŸä¸€è‡´ï¼Œå½“ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œå˜é‡çš„å†…å­˜ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚</li><li>å†…å­˜å¤§å°ï¼šæ ˆçš„å¤§å°é€šå¸¸è¾ƒå°ï¼Œå¹¶ä¸”åœ¨ç¨‹åºå¯åŠ¨æ—¶ç¡®å®šã€‚å¤§å¤šæ•°ç³»ç»Ÿçš„æ ˆå¤§å°é™åˆ¶åœ¨å‡ MBè‡³å‡ åMBä¹‹é—´ã€‚</li></ul><p>åˆ†é…æ•ˆç‡ï¼š</p><ul><li>é«˜æ•ˆç‡ï¼šç”±äºæ ˆæ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†çš„ï¼Œå†…å­˜åˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦éå¸¸å¿«ï¼Œé€šå¸¸åªéœ€å¢åŠ æˆ–å‡å°‘æ ˆæŒ‡é’ˆå³å¯å®Œæˆã€‚</li><li>ä½å¼€é”€ï¼šæ ˆä¸Šçš„å†…å­˜åˆ†é…ä¸éœ€è¦å¤æ‚çš„å†…å­˜ç®¡ç†ç®—æ³•ï¼Œå¼€é”€æä½ã€‚</li></ul><p><strong>å †ï¼ˆHeapï¼‰</strong></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å†…å­˜åˆ†é…æ–¹å¼ï¼šå †æ˜¯ä¸€ä¸ªä¸è¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œé€šè¿‡åŠ¨æ€å†…å­˜åˆ†é…å‡½æ•°ï¼ˆå¦‚mallocã€callocã€reallocã€freeï¼‰è¿›è¡Œåˆ†é…å’Œé‡Šæ”¾ã€‚</li><li>ç®¡ç†æ–¹å¼ï¼šéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†å†…å­˜åˆ†é…å’Œé‡Šæ”¾ï¼Œå®¹æ˜“å‘ç”Ÿå†…å­˜æ³„æ¼ï¼ˆå¿˜è®°é‡Šæ”¾å†…å­˜ï¼‰æˆ–å†…å­˜ç¢ç‰‡ï¼ˆé¢‘ç¹åˆ†é…å’Œé‡Šæ”¾å¯¼è‡´ï¼‰ã€‚</li><li>ç”Ÿå‘½å‘¨æœŸï¼šå˜é‡çš„ç”Ÿå‘½å‘¨æœŸç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œåˆ†é…çš„å†…å­˜åœ¨æ‰‹åŠ¨é‡Šæ”¾å‰ä¸€ç›´æœ‰æ•ˆã€‚</li><li>å†…å­˜å¤§å°ï¼šå †çš„å¤§å°é€šå¸¸è¾ƒå¤§ï¼Œå¯ä»¥æ ¹æ®ç³»ç»Ÿçš„ç‰©ç†å†…å­˜å’Œæ“ä½œç³»ç»Ÿçš„é™åˆ¶è¿›è¡Œæ‰©å±•ã€‚</li></ul><p>åˆ†é…æ•ˆç‡ï¼š</p><ul><li>è¾ƒä½æ•ˆç‡ï¼šå †å†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾æ¶‰åŠå¤æ‚çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼ˆå¦‚è‡ªç”±é“¾è¡¨ã€äºŒå‰æ ‘ã€ä½å›¾ç­‰ï¼‰ï¼Œå› æ­¤é€Ÿåº¦è¾ƒæ…¢ã€‚</li><li>è¾ƒé«˜å¼€é”€ï¼šç”±äºéœ€è¦ç»´æŠ¤å†…å­˜ç®¡ç†çš„æ•°æ®ç»“æ„ï¼Œåˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„æ“ä½œå¼€é”€è¾ƒé«˜ã€‚</li></ul><p>æ€»ç»“</p><ul><li>æ ˆï¼š <ul><li>ä¼˜ç‚¹ï¼šåˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦å¿«ã€å¼€é”€ä½ã€è‡ªåŠ¨ç®¡ç†å†…å­˜ã€ä¸å®¹æ˜“å‘ç”Ÿå†…å­˜æ³„æ¼ã€‚</li><li>ç¼ºç‚¹ï¼šå†…å­˜ç©ºé—´æœ‰é™ã€çµæ´»æ€§å·®ï¼Œä¸èƒ½ç”¨äºéœ€è¦å¤§é‡å†…å­˜æˆ–åŠ¨æ€è°ƒæ•´å¤§å°çš„æƒ…å†µã€‚</li></ul></li><li>å †ï¼š <ul><li>ä¼˜ç‚¹ï¼šå†…å­˜ç©ºé—´å¤§ã€çµæ´»æ€§é«˜ï¼Œå¯ä»¥åˆ†é…ä»»æ„å¤§å°çš„å†…å­˜å—ï¼Œé€‚åˆéœ€è¦åŠ¨æ€å†…å­˜åˆ†é…çš„åœºæ™¯ã€‚</li><li>ç¼ºç‚¹ï¼šåˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦æ…¢ã€å¼€é”€é«˜ã€éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€å®¹æ˜“å‘ç”Ÿå†…å­˜æ³„æ¼å’Œç¢ç‰‡åŒ–ã€‚</li></ul></li></ul><h3 id="iå’Œi-å“ªä¸ªæ•ˆç‡æ›´é«˜" tabindex="-1"><a class="header-anchor" href="#iå’Œi-å“ªä¸ªæ•ˆç‡æ›´é«˜" aria-hidden="true">#</a> ++iå’Œi++å“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ</h3><p>å¯¹äº<strong>å†…å»ºæ•°æ®ç±»å‹</strong>ï¼Œæ•ˆç‡æ²¡æœ‰åŒºåˆ«ã€‚</p><p>å¯¹äº<strong>è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹</strong>ï¼Œ å‰ç¼€å¼(++i)å¯ä»¥è¿”å›å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œåç¼€å¼(i++)å¿…é¡»è¿”å›å¯¹è±¡çš„å€¼ï¼Œå­˜åœ¨å¤åˆ¶å¼€é”€ã€‚å› æ­¤++iæ•ˆç‡æ›´é«˜ã€‚</p><h3 id="å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°" aria-hidden="true">#</a> å¦‚ä½•ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</h3><ul><li><p>å¦‚æœä½ çš„ç¼–è¯‘å™¨æ”¯æŒ C++11ï¼Œç›´æ¥ä½¿ç”¨ delete</p></li><li><p>å¯ä»¥æŠŠæ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œç¬¦å£°æ˜æˆprivateåŒæ—¶ä¸æä¾›å®ç°ã€‚</p></li><li><p>å¯ä»¥é€šè¿‡ä¸€ä¸ªåŸºç±»æ¥å°è£…ç¬¬äºŒæ­¥ï¼Œå› ä¸ºé»˜è®¤ç”Ÿæˆçš„æ‹·è´æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨åŸºç±»çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œå¦‚æœåŸºç±»çš„æ‹·è´æ„é€ å‡½æ•°æ˜¯privateï¼Œé‚£ä¹ˆå®ƒæ— æ³•è®¿é—®ï¼Œä¹Ÿå°±æ— æ³•æ­£å¸¸ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°</p></li></ul><h3 id="std-futureå’Œstd-promiseçš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#std-futureå’Œstd-promiseçš„ä½œç”¨" aria-hidden="true">#</a> std::futureå’Œstd::promiseçš„ä½œç”¨</h3><p><strong>1.std::promise å’Œ std::future çš„è®¾è®¡åŸç†</strong></p><p><strong>std::promise</strong></p><ul><li>std::promise æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œè¡¨ç¤ºä¸€ä¸ªå€¼çš„â€œæ‰¿è¯ºâ€ï¼ˆpromiseï¼‰ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨æœªæ¥æŸä¸ªæ—¶åˆ»è®¾ç½®ä¸€ä¸ªå€¼æˆ–ä¼ é€’ä¸€ä¸ªå¼‚å¸¸ã€‚</li><li>promise å¯¹è±¡å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå…±äº«çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€å¯ä»¥åŒ…å«ä¸€ä¸ªå€¼æˆ–å¼‚å¸¸ã€‚</li><li>std::promise çš„ä¸»è¦æ“ä½œæ˜¯ set_valueï¼ˆè®¾ç½®å€¼ï¼‰å’Œ set_exceptionï¼ˆè®¾ç½®å¼‚å¸¸ï¼‰ã€‚è®¾ç½®å®Œæˆåï¼Œè¿™ä¸ªå…±äº«çŠ¶æ€ä¼šè¢«æ ‡è®°ä¸ºâ€œå°±ç»ªâ€ã€‚</li></ul><p><strong>std::future</strong></p><ul><li>std::future æ˜¯ä¸ std::promise é…å¯¹çš„å¯¹è±¡ï¼Œç”¨äºæ£€ç´¢ promise è®¾ç½®çš„å€¼æˆ–å¼‚å¸¸ã€‚</li><li>future å¯¹è±¡ä¹ŸæŒæœ‰ç›¸åŒçš„å…±äº«çŠ¶æ€ã€‚é€šè¿‡è°ƒç”¨ get() æ–¹æ³•ï¼Œfuture å¯ä»¥è®¿é—®è¯¥çŠ¶æ€ä¸­çš„å€¼æˆ–æ•è·çš„å¼‚å¸¸ã€‚</li><li>å¦‚æœ future çš„ get() åœ¨å…±äº«çŠ¶æ€æœªå°±ç»ªæ—¶è°ƒç”¨ï¼Œå®ƒä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ï¼Œç›´åˆ°çŠ¶æ€å°±ç»ªã€‚</li></ul><p><strong>2. promise å’Œ future çš„åŸºæœ¬åŸç†</strong></p><p>1.å…±äº«çŠ¶æ€:</p><ul><li>promise å’Œ future ä¹‹é—´å…±äº«åŒä¸€ä¸ªçŠ¶æ€ã€‚promise æ˜¯ç”Ÿäº§è€…ï¼Œå¯ä»¥è®¾ç½®å…±äº«çŠ¶æ€çš„å€¼æˆ–å¼‚å¸¸ï¼›future æ˜¯æ¶ˆè´¹è€…ï¼Œå¯ä»¥ç­‰å¾…å¹¶è·å–è¿™ä¸ªçŠ¶æ€çš„å€¼æˆ–å¼‚å¸¸ã€‚</li></ul><p>2.ä¸€æ¬¡æ€§:</p><ul><li>promise çš„ set_value æˆ– set_exception åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼›ç›¸åº”åœ°ï¼Œfuture çš„ get() ä¹Ÿåªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚è°ƒç”¨ get() åï¼Œfuture ä¸å†æŒæœ‰å…±äº«çŠ¶æ€ã€‚</li><li>å¦‚æœå¤šæ¬¡è°ƒç”¨ get() ä¼šæŠ›å‡º std::future_error å¼‚å¸¸ã€‚</li></ul><p>3.çº¿ç¨‹å®‰å…¨:</p><ul><li>promise å’Œ future çš„å®ç°ä¿è¯äº†å®ƒä»¬åœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´æ“ä½œæ—¶çš„çº¿ç¨‹å®‰å…¨æ€§ã€‚è¿™ä½¿å¾—å®ƒä»¬éå¸¸é€‚åˆå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„åŒæ­¥æ“ä½œã€‚</li></ul><p><strong>3. å…¸å‹ä½¿ç”¨åœºæ™¯</strong></p><p>å•ä¸€ä»»åŠ¡çš„å¼‚æ­¥ç»“æœè·å–</p><ul><li>åœºæ™¯: ä½ æœ‰ä¸€ä¸ªè€—æ—¶æ“ä½œéœ€è¦åœ¨åå°çº¿ç¨‹ä¸­å®Œæˆï¼Œä½†ä½ å¸Œæœ›åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾…å…¶ç»“æœã€‚</li><li>è§£å†³æ–¹æ¡ˆ: åˆ›å»ºä¸€ä¸ª std::promiseï¼Œå¯åŠ¨çº¿ç¨‹æ‰§è¡Œè€—æ—¶ä»»åŠ¡ï¼Œå¹¶åœ¨ä»»åŠ¡å®Œæˆæ—¶é€šè¿‡ promise.set_value() è®¾ç½®ç»“æœã€‚ä¸»çº¿ç¨‹é€šè¿‡ std::future çš„ get() æ–¹æ³•è·å–ç»“æœã€‚</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">get_future</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token double-colon punctuation">::</span>thread <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>p<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰§è¡Œè€—æ—¶æ“ä½œ</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">some_long_running_task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">set_value</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> result <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é˜»å¡ç›´åˆ° result å°±ç»ª</span>
t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¼‚å¸¸ä¼ é€’</p><ul><li>åœºæ™¯: å¦‚æœåå°ä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œä½ å¸Œæœ›åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†è¿™ä¸ªå¼‚å¸¸ã€‚</li><li>è§£å†³æ–¹æ¡ˆ: åœ¨åå°çº¿ç¨‹ä¸­æ•è·å¼‚å¸¸å¹¶é€šè¿‡ promise.set_exception() ä¼ é€’ç»™ä¸»çº¿ç¨‹ã€‚ä¸»çº¿ç¨‹åœ¨è°ƒç”¨ future.get() æ—¶ä¼šæ•è·åˆ°è¿™ä¸ªå¼‚å¸¸ã€‚</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">get_future</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token double-colon punctuation">::</span>thread <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>p<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">some_potentially_throwing_task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token punctuation">.</span><span class="token function">set_value</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span><span class="token function">set_exception</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">current_exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>exception<span class="token operator">&amp;</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Exception: &quot;</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4.std::async å’Œ std::shared_future</strong> std::async</p><ul><li>ä½œç”¨: std::async æ˜¯ä¸€ä¸ªé«˜å±‚çš„å·¥å…·ï¼Œç”¨äºå¯åŠ¨å¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶è¿”å›ä¸€ä¸ª std::futureã€‚å®ƒå¯ä»¥åœ¨åå°çº¿ç¨‹æˆ–å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå–å†³äºä¼ é€’çš„æ ‡å¿—ï¼ˆstd::launch::async æˆ– std::launch::deferredï¼‰ã€‚</li><li>å†…éƒ¨å®ç°: std::async å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ª promiseï¼Œå¹¶å¯åŠ¨ä»»åŠ¡ã€‚åœ¨ä»»åŠ¡å®Œæˆæ—¶ï¼Œå°†ç»“æœé€šè¿‡ promise è®¾ç½®ï¼Œä»è€Œä½¿å¾—è¿”å›çš„ future å¯ä»¥è·å–è¿™ä¸ªç»“æœã€‚</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>std::future&lt;int&gt; f = std::async(std::launch::async, [] {
    return some_long_running_task();
});

int result = f.get();  // é˜»å¡ç›´åˆ°ç»“æœå°±ç»ª
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>std::shared_future</p><ul><li>ä½œç”¨: std::future æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸èƒ½è¢«å¤šæ¬¡è°ƒç”¨ get()ã€‚ä¸ºäº†å®ç°ç»“æœçš„å¤šæ¬¡è®¿é—®ï¼ŒC++ æä¾›äº† std::shared_futureï¼Œå®ƒå…è®¸å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ª future çš„ç»“æœã€‚</li><li>ç”¨æ³•: å¯ä»¥é€šè¿‡ future.share() æ–¹æ³•å°† std::future è½¬æ¢ä¸º std::shared_futureã€‚</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>shared_future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> sf <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">get_future</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">share</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token double-colon punctuation">::</span>thread <span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>sf<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">int</span> result <span class="token operator">=</span> sf<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>thread <span class="token function">t2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>sf<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">int</span> result <span class="token operator">=</span> sf<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">set_value</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5. promise å’Œ future çš„é«˜çº§ç”¨æ³•</strong></p><p>é“¾å¼ä»»åŠ¡æ‰§è¡Œ</p><ul><li>åœºæ™¯: æœ‰æ—¶ä¸€ä¸ªä»»åŠ¡çš„è¾“å‡ºéœ€è¦ä½œä¸ºå¦ä¸€ä¸ªä»»åŠ¡çš„è¾“å…¥ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥é€šè¿‡ future çš„é“¾å¼è°ƒç”¨æ¥å®ç°ä»»åŠ¡çš„ä¾èµ–ç®¡ç†ã€‚</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>promise<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">get_future</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">auto</span> chained_future <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> val <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> val <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">set_value</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> final_result <span class="token operator">=</span> chained_future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// final_result = 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¹¶è¡Œä»»åŠ¡å¤„ç† åœºæ™¯: ä½ æœ‰å¤šä¸ªç‹¬ç«‹çš„ä»»åŠ¡ï¼Œå¸Œæœ›å®ƒä»¬åŒæ—¶æ‰§è¡Œï¼Œå¹¶åœ¨æ‰€æœ‰ä»»åŠ¡å®Œæˆåè·å–ç»“æœã€‚ è§£å†³æ–¹æ¡ˆ: å¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªä»»åŠ¡å¹¶ä½¿ç”¨ promise æ¥è®¾ç½®ç»“æœã€‚ä½¿ç”¨å¤šä¸ª future æ¥ç­‰å¾…æ‰€æœ‰ä»»åŠ¡çš„å®Œæˆã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> futures<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    futures<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">async</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>launch<span class="token double-colon punctuation">::</span>async<span class="token punctuation">,</span> <span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> i <span class="token operator">*</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> f <span class="token operator">:</span> futures<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Result: &quot;</span> <span class="token operator">&lt;&lt;</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°ç»“</p><ul><li>std::promise: ç”¨äºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è®¾ç½®ä¸€ä¸ªå€¼æˆ–å¼‚å¸¸ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ futureã€‚</li><li>std::future: ç”¨äºç­‰å¾…å’Œè·å– promise è®¾ç½®çš„å€¼æˆ–å¼‚å¸¸ã€‚get() æ–¹æ³•åœ¨å€¼å°±ç»ªä¹‹å‰é˜»å¡è°ƒç”¨çº¿ç¨‹ã€‚</li><li>std::async: æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¥å£æ¥å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶è¿”å›ä¸€ä¸ª futureã€‚</li><li>std::shared_future: å…è®¸å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ª future çš„ç»“æœã€‚</li></ul><p>é€šè¿‡åˆç†åœ°ä½¿ç”¨ promise å’Œ futureï¼Œå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†å¤šçº¿ç¨‹ä»»åŠ¡çš„ç»“æœä¼ é€’å’Œå¼‚å¸¸å¤„ç†ï¼Œä»è€Œå®ç°å¤æ‚çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ã€‚</p><h2 id="ç±»å’Œå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ç±»å’Œå¯¹è±¡" aria-hidden="true">#</a> ç±»å’Œå¯¹è±¡</h2><h3 id="ä»€ä¹ˆæ˜¯rtti" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯rtti" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯RTTI</h3><p>RTTIï¼ˆRun-Time Type Informationï¼Œè¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼‰æ˜¯ä¸€ç§åœ¨ç¨‹åºè¿è¡Œæ—¶æä¾›å¯¹è±¡ç±»å‹ä¿¡æ¯çš„æœºåˆ¶ã€‚å®ƒå…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥å¯¹è±¡çš„ç±»å‹ï¼Œé€šå¸¸ç”¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>ç±»å‹è¯†åˆ«ï¼šç¡®å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºç‰¹å®šçš„ç±»ï¼Œæˆ–è€…ç¡®å®šå¯¹è±¡çš„å®é™…ç±»å‹ã€‚</li><li>åŠ¨æ€è½¬æ¢ï¼šå®‰å…¨åœ°å°†åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚</li><li>è°ƒè¯•å’Œæ—¥å¿—è®°å½•ï¼šåœ¨è°ƒè¯•å’Œæ—¥å¿—è®°å½•è¿‡ç¨‹ä¸­è·å–å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ã€‚</li></ul><p>åœ¨C++ä¸­ï¼ŒRTTIä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ“ä½œç¬¦å®ç°ï¼š</p><ul><li><p>typeidï¼šç”¨äºè·å–å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œtypeid(object)ä¼šè¿”å›ä¸€ä¸ªè¡¨ç¤ºobjectç±»å‹çš„std::type_infoå¯¹è±¡ã€‚</p></li><li><p>dynamic_castï¼šç”¨äºå°†åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨å®‰å…¨åœ°è½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚åªæœ‰åœ¨è½¬æ¢æ˜¯åˆæ³•çš„æƒ…å†µä¸‹ï¼Œdynamic_castæ‰ä¼šæˆåŠŸï¼Œå¦åˆ™ä¼šè¿”å›nullptrï¼ˆå¯¹äºæŒ‡é’ˆï¼‰æˆ–æŠ›å‡ºstd::bad_castå¼‚å¸¸ï¼ˆå¯¹äºå¼•ç”¨ï¼‰ã€‚</p></li><li></li></ul><p>ä½¿ç”¨RTTIéœ€è¦åœ¨ç¼–è¯‘æ—¶å¯ç”¨æ”¯æŒRTTIçš„é€‰é¡¹ï¼Œå› ä¸ºæŸäº›ç¼–è¯‘å™¨å¯èƒ½é»˜è®¤ç¦ç”¨RTTIä»¥ä¼˜åŒ–æ€§èƒ½å’Œå‡å°ä»£ç å¤§å°ã€‚RTTIæœºåˆ¶åœ¨C++çš„å¤šæ€æ€§ï¼ˆpolymorphismï¼‰ä¸­éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç»§æ‰¿å±‚æ¬¡ç»“æ„å¤æ‚çš„æƒ…å†µä¸‹ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†RTTIçš„ä½¿ç”¨ï¼š</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;typeinfo&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Base<span class="token operator">*</span> b <span class="token operator">=</span> <span class="token keyword">new</span> Derived<span class="token punctuation">;</span>
    
    <span class="token comment">// ä½¿ç”¨typeidæ“ä½œç¬¦</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Type of b: &quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span><span class="token operator">*</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// ä½¿ç”¨dynamic_castè¿›è¡Œå®‰å…¨çš„å‘ä¸‹è½¬æ¢</span>
    Derived<span class="token operator">*</span> d <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>Derived<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;b is of type Derived.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;b is not of type Derived.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">delete</span> b<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>typeid</code>ç”¨äºè·å–å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œè€Œ<code>dynamic_cast</code>ç”¨äºå®‰å…¨åœ°å°†åŸºç±»æŒ‡é’ˆè½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆã€‚</p><h2 id="stl" tabindex="-1"><a class="header-anchor" href="#stl" aria-hidden="true">#</a> STL</h2><h3 id="mapå’Œunordered-mapçš„åŒºåˆ«-å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#mapå’Œunordered-mapçš„åŒºåˆ«-å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> mapå’Œunordered_mapçš„åŒºåˆ«? å„è‡ªä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>1.åº•å±‚å®ç°</strong></p><ul><li>map: æ˜¯åŸºäºçº¢é»‘æ ‘ï¼ˆä¸€ç§è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼‰å®ç°çš„ã€‚è¿™ä½¿å¾— map ä¸­çš„å…ƒç´ æ˜¯æŒ‰ç…§é”®çš„é¡ºåºè‡ªåŠ¨æ’åºçš„ã€‚</li><li>unordered_map: æ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°çš„ï¼Œå…ƒç´ çš„å­˜å‚¨é¡ºåºæ˜¯æ— åºçš„ï¼Œå–å†³äºå“ˆå¸Œå‡½æ•°çš„ç»“æœã€‚</li></ul><p><strong>2. æ—¶é—´å¤æ‚åº¦</strong></p><ul><li><p>map: ç”±äºæ˜¯å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œæ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(log n)ã€‚</p></li><li><p>unordered_map: ç”±äºæ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚ä½†åœ¨æœ€åæƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šé€€åŒ–åˆ° O(n)ï¼ˆä¾‹å¦‚ï¼Œå½“å“ˆå¸Œå†²çªä¸¥é‡æ—¶ï¼‰ã€‚ <strong>3. å…ƒç´ çš„å­˜å‚¨é¡ºåº</strong></p></li><li><p>map: å…ƒç´ æŒ‰é”®çš„é¡ºåºå­˜å‚¨å’Œéå†ã€‚</p></li><li><p>unordered_map: å…ƒç´ æ²¡æœ‰ç‰¹å®šçš„é¡ºåºï¼Œéå†é¡ºåºæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚ <strong>4. å†…å­˜æ¶ˆè€—</strong></p></li><li><p>map: ç”±äºçº¢é»‘æ ‘ç»“æ„çš„åŸå› ï¼Œé€šå¸¸éœ€è¦é¢å¤–çš„å†…å­˜æ¥ç»´æŒæ ‘çš„å¹³è¡¡ã€‚</p></li><li><p>unordered_map: ç”±äºä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå…¶å†…å­˜ä½¿ç”¨é‡ä¸»è¦å–å†³äºè´Ÿè½½å› å­å’Œå“ˆå¸Œå†²çªçš„å¤„ç†æ–¹å¼ã€‚ <strong>5. ä½¿ç”¨åœºæ™¯</strong></p></li><li><p>map:</p><ul><li>å½“éœ€è¦å¯¹é”®å€¼è¿›è¡Œæ’åºæˆ–æŒ‰é¡ºåºéå†æ—¶ï¼Œé€‰æ‹© mapã€‚</li><li>ä¾‹å¦‚ï¼Œéœ€è¦æŒ‰å­—æ¯é¡ºåºå­˜å‚¨å’Œæ£€ç´¢å­¦ç”Ÿå§“ååŠå…¶æˆç»©çš„æƒ…å†µã€‚</li><li>é€‚åˆéœ€è¦è¾ƒç¨³å®šçš„æ—¶é—´å¤æ‚åº¦å’Œæœ‰åºæ•°æ®è®¿é—®çš„åœºæ™¯ã€‚</li></ul></li><li><p>unordered_map:</p><ul><li>å½“ä¸»è¦å…³æ³¨æŸ¥æ‰¾é€Ÿåº¦è€Œä¸å…³å¿ƒé”®çš„é¡ºåºæ—¶ï¼Œé€‰æ‹© unordered_mapã€‚</li><li>ä¾‹å¦‚ï¼Œç”¨äºç»Ÿè®¡å•è¯é¢‘ç‡æˆ–å­˜å‚¨å“ˆå¸Œè¡¨ä»¥å¿«é€ŸæŸ¥æ‰¾çš„æƒ…å†µã€‚</li><li>é€‚åˆæ•°æ®é‡å¤§ä¸”å¯¹æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯éœ€è¦é«˜æ•ˆçš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œæ—¶ã€‚</li></ul></li></ul><p><strong>æ€»ç»“</strong></p><ul><li>ä½¿ç”¨ map å½“ä½ éœ€è¦æœ‰åºçš„æ•°æ®æˆ–è€…éœ€è¦æ¯”è¾ƒç¨³å®šçš„æ€§èƒ½æ—¶ã€‚</li><li>ä½¿ç”¨ unordered_map å½“ä½ æ›´å…³æ³¨æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ€§èƒ½ï¼Œå¹¶ä¸”ä¸éœ€è¦æ•°æ®é¡ºåºæ—¶ã€‚</li></ul><h2 id="å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ" aria-hidden="true">#</a> å‚è€ƒ</h2><p><a href="https://zhuanlan.zhihu.com/p/629336564(%E5%90%AB%E7%AD%94%E6%A1%88)" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/629336564(å«ç­”æ¡ˆ)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/posts/Interview/cpp.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 119160524@qq.com">zgjsxx</span>,<!--]--><!--[--><span class="contributor" title="email: 119160625@qq.com">zgjsxx</span><!--]--><!--]--></div></div></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Code Building</div><div class="copyright">Copyright Â© 2024 ç¨‹åºå‘˜å°x</div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-8c1e171f.js" defer></script>
  </body>
</html>
